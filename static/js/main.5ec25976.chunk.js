(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(t,e,n){t.exports=n(30)},30:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getPosts",function(){return T}),n.d(r,"getComments",function(){return C});var o=n(0),a=n.n(o),c=n(16),s=n.n(c),i=n(10),u=n(18),l=n(6),p=(n(28),n(8));var h=Object(l.c)({generalStates:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a({isFetchingPosts:!0,isFetchingComments:!0,error:""}),e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_POSTS_START":return t.withMutations(function(t){t.set("isFetchingPosts",!0).set("error","")});case"GET_POSTS_ERROR":return t.withMutations(function(t){t.set("isFetchingPosts",!1).set("error",e.error)});case"GET_POSTS_END":return t.set("isFetchingPosts",!1);case"GET_COMMENTS_START":return t.withMutations(function(t){t.set("isFetchingComments",!0).set("error","")});case"GET_COMMENTS_ERROR":return t.withMutations(function(t){t.set("isFetchingComments",!1).set("error",e.error)});case"GET_COMMENTS_END":return t.set("isFetchingComments",!1);default:return t}},entities:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a({posts:[],comments:[]}),e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_POSTS_END":return t.set("posts",p.a(e.data));case"GET_COMMENTS_END":return t.set("comments",p.a(e.data));default:return t}}});var m=l.a.apply(void 0,[].concat([u.a]));var f=Object(l.d)(h,m),d=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}var O=n(1),b=n(2),v=n(4),E=n(3),j=n(5),y="Error inesperado, intente nuevamente, tipo de error:";function T(){return function(t){t({type:"GET_POSTS_START"}),fetch("https://jsonplaceholder.typicode.com/posts").then(function(e){return e.ok||(t(w("".concat(y," ").concat(e.status))),console.error("".concat(y," ").concat(e.status))),e.json()}).then(function(e){t({type:"GET_POSTS_END",data:e})}).catch(function(e){t(w("".concat(y," ").concat(e.status))),console.error("".concat(y," ").concat(e.status))})}}function w(t){return{type:"GET_POSTS_ERROR",error:t}}function C(){return function(t){t({type:"GET_COMMENTS_START"}),fetch("https://jsonplaceholder.typicode.com/comments").then(function(e){return e.ok||(t(S("".concat(y," ").concat(e.status))),console.error("".concat(y," ").concat(e.status))),e.json()}).then(function(e){t({type:"GET_COMMENTS_END",data:e})}).catch(function(e){t(S("".concat(y," ").concat(e.status))),console.error("".concat(y," ").concat(e.status))})}}function S(t){return{type:"GET_COMMENTS_ERROR",error:t}}var _=function(t){function e(){return Object(O.a)(this,e),Object(v.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"box-loader"},a.a.createElement("div",{className:"loader"}))}}]),e}(o.Component),k=function(t){function e(){return Object(O.a)(this,e),Object(v.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){var t=this.props.error;return a.a.createElement("p",{className:"error-message"},t)}}]),e}(o.Component),N=function(t){function e(){return Object(O.a)(this,e),Object(v.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){var t=this.props,e=t.isFetching,n=t.error;return e?a.a.createElement(_,null):n?a.a.createElement(k,{error:n}):this.props.children}}]),e}(o.Component),M=function(t){function e(){return Object(O.a)(this,e),Object(v.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(b.a)(e,[{key:"getComments",value:function(){var t=this.props,e=t.post;return t.entities.get("comments").filter(function(t){return t.get("postId")===e.get("id")}).slice(0,3).map(function(t){return a.a.createElement("div",{className:"comment-box",key:"comment-".concat(t.get("id"))},a.a.createElement("h4",null,"".concat(t.get("name")," - ").concat(t.get("email"),":")),a.a.createElement("p",null,t.get("body")))})}},{key:"render",value:function(){return a.a.createElement("div",{className:"comments-box"},a.a.createElement("h3",null,"Comentarios:"),a.a.createElement("ul",null,this.getComments()))}}]),e}(o.Component),R=function(t){function e(){return Object(O.a)(this,e),Object(v.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){var t=this.props,e=t.post,n=t.showComments;return a.a.createElement("article",{className:"box"},a.a.createElement("h3",null,e.get("title")),n?a.a.createElement(M,this.props):null)}}]),e}(o.Component),P=function(t){function e(){return Object(O.a)(this,e),Object(v.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.entities,r=e.pagination;return n.get("posts").size?n.get("posts").sortBy(function(t){return t.get("id")}).filter(function(t){return t.get("title")}).slice(0,r).map(function(e,n){return a.a.createElement(R,Object.assign({key:"post-".concat(e.get("id")),post:e,showComments:0===n},t.props))}):a.a.createElement(k,{error:"No se han encontrado posts"})}}]),e}(o.Component);P.defaultProps={pagination:10};var G=function(t){function e(){return Object(O.a)(this,e),Object(v.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(b.a)(e,[{key:"componentDidMount",value:function(){this.props.getPosts(),this.props.getComments()}},{key:"render",value:function(){var t=this.props.generalStates;return a.a.createElement(N,{isFetching:t.get("isFetchingPosts")||t.get("isFetchingComments"),error:t.get("error")},a.a.createElement("h1",null,"Last 10 Posts"),a.a.createElement(P,this.props))}}]),e}(o.Component),F=function(t){function e(){return Object(O.a)(this,e),Object(v.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(j.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){return a.a.createElement("section",{className:"app-container"},a.a.createElement(G,this.props))}}]),e}(o.Component);var A=Object(i.b)(function(t){return t},function(t){return Object(l.b)(r,t)})(F);s.a.render(a.a.createElement(i.a,{store:f},a.a.createElement(A,null)),document.getElementById("app")),function(t){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");d?(function(t,e){fetch(t).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):g(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):g(e,t)})}}()}},[[19,2,1]]]);
//# sourceMappingURL=main.5ec25976.chunk.js.map